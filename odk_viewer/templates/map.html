{% extends 'base.html' %}

{% block additional-headers %}
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<style type="text/css">
  html { height: 100%; overflow: hidden }
  body { height: 100%; margin: 0; padding: 0 }
  #map_canvas { height: 100% }
  .leaflet-popup-content {max-height: 450px; overflow: auto; width: 420px; padding: 4px;}
  .leaflet-popup-content ul {list-style-type:none;}
  #legend {
      background-color: white;
      width: 200px;
      opacity: 0.95;
      position: absolute;
      bottom: 15px;
      left: 15px;
      padding: 15px;
      z-index: 7;
      border-radius: 3px;
  }
  #legend ul {list-style: none;margin: 0px}
  #legend span.legend-bullet {
      width: 15px;
      height: 15px;
      float: left;
      margin-right: 5px;
  }
</style>
<link rel="stylesheet" href="/static/css/leaflet.css" />
<!--[if lte IE 8]>
    <link rel="stylesheet" href="/static/css/leaflet.ie.css" />
<![endif]-->
<script type="text/javascript" src="/static/js/leaflet.js"></script>
<script type="text/javascript" src="/static/js/wax.leaf.min.js"></script>
<script type="text/javascript" src="/static/js/TileLayer.Bing.js"></script>
<script type="text/javascript">
var center = {{ center|safe }};
var formJSONUrl = "{{ jsonform_url }}";
var mongoAPIUrl = "{{ mongo_api_url }}";
$('#selectLanguage').live('change', function() {
    $('.language').hide();
    $('.' + $(this).val()).show();
});
function setMapHeight(){
  var newHeight = $(window).height()-
      $('.navbar-inner').height()
  $('#map_canvas').height(newHeight);
}
$(document).ready(function() { setMapHeight(); });
$(window).resize(setMapHeight);
</script>
<script src="/static/js/mapview.js" type="text/javascript"></script>
{% endblock %}

{% block body %}
<body onload="initialize()">
  {% include "topbar.html" %}

  <div id="map_canvas" style="width:100%; height:100%;"></div>
</body>
{% endblock %}
